import{_ as B,u as L,r as c,m as M,k as b,q as N,c as n,a as e,w as j,b as u,v as h,x,F as v,g as p,n as z,h as D,o as r,t as f,p as F,j as K}from"./index-kKn_iglM.js";const d=m=>(F("data-v-8f25f203"),m=m(),K(),m),T={class:"box p-3 rounded-3"},q=d(()=>e("h1",{class:"text-center"},"Criar conta",-1)),H={class:"row"},O={class:"col-md-6"},P=d(()=>e("label",{class:"form-label px-2",for:"nome"},"Nome",-1)),R=["disabled"],G={class:"col-md-6"},J=d(()=>e("label",{class:"form-label px-2",for:"email"},"Email",-1)),Q=["disabled"],W=d(()=>e("label",{class:"form-label px-2",for:"cursos"},"Curso",-1)),X=["disabled"],Y=["value"],Z={class:"row"},$={class:"col-md-6"},ee=d(()=>e("label",{class:"form-label px-2",for:"anos"},"Ano",-1)),ae=["disabled"],se=["value"],oe={class:"col-md-6"},le=d(()=>e("label",{for:"turmas",class:"form-label px-2"},"Turma",-1)),te=["disabled"],ne=["value"],re={class:"row"},de={class:"col-md-6"},ie=d(()=>e("label",{class:"form-label px-2",for:"senha"},"Senha",-1)),ue=["disabled"],ce={class:"col-md-6"},ve=d(()=>e("label",{class:"form-label px-2",for:"confirmar_senha"},"Confirmar senha:",-1)),me=["disabled"],_e={class:"div-botao p-3 my-2"},he=["disabled"],pe={class:"alinharLoading"},fe=d(()=>e("div",{class:"spinner-border"},null,-1)),be=[fe],xe={__name:"CriarConta",setup(m){const S=L(),s=c({nome:"",email:"",curso:1,ano:1,turma:1,senha:"",confirmarSenha:""}),i=c([]),t=c(!0),_=c(!0),g=c(),w=c();M(()=>{C()});async function C(){[g.value,w.value]=await Promise.all([await b.get("cursos").then(l=>l.data).catch(l=>(alert("Erro"),l)),await b.get("turmas").then(l=>l.data).catch(l=>(alert("Erro"),l))]),t.value=!1,_.value=!1}const k=N(()=>s.value.curso==1?[1]:[1,2,3,4]);async function y(){if(i.value=[],s.value.nome.length<3){i.value.push("Nome inválido!");return}if(!s.value.email||s.value.email.split("@")[1]!="aluno.feliz.ifrs.edu.br"){i.value.push("Email inválido!");return}if(!s.value.senha||s.value.senha.length<6||!s.value.confirmarSenha||s.value.confirmarSenha.length<6||s.value.confirmarSenha!=s.value.senha){i.value.push("Senha inválida!");return}async function l(){_.value=!0;const{nome:o,email:a,senha:V,ano:U,curso:E,turma:I}=s.value;await b.post("usuario",{nome:o,email:a,senha:V,ano:U,curso:E,turma:I}).then(()=>{alert("Ative sua conta pelo email!"),S.push("/Login")}).catch(A=>{A.response.status=="422"?i.value.push("Email inválido!"):i.value.push("O email já está cadastrado!")}),_.value=!1}l()}return(l,o)=>(r(),n(v,null,[e("main",null,[e("div",T,[q,e("div",{class:"px-3",onKeydown:j(y,["enter"])},[e("div",H,[e("div",O,[P,u(e("input",{class:"form-control rounded-4",type:"text",id:"nome","onUpdate:modelValue":o[0]||(o[0]=a=>s.value.nome=a),disabled:t.value},null,8,R),[[h,s.value.nome]])]),e("div",G,[J,u(e("input",{class:"form-control rounded-4",type:"email",id:"email","onUpdate:modelValue":o[1]||(o[1]=a=>s.value.email=a),disabled:t.value},null,8,Q),[[h,s.value.email]])])]),e("div",null,[W,u(e("select",{class:"form-select rounded-4",id:"cursos","onUpdate:modelValue":o[2]||(o[2]=a=>s.value.curso=a),disabled:t.value},[(r(!0),n(v,null,p(g.value,a=>(r(),n("option",{key:a.id,value:a.id},f(a.nome),9,Y))),128))],8,X),[[x,s.value.curso]])]),e("div",Z,[e("div",$,[ee,u(e("select",{class:"form-select rounded-4",id:"anos","onUpdate:modelValue":o[3]||(o[3]=a=>s.value.ano=a),disabled:t.value},[(r(!0),n(v,null,p(k.value,a=>(r(),n("option",{key:a,value:a},f(a)+"°Ano",9,se))),128))],8,ae),[[x,s.value.ano]])]),e("div",oe,[le,u(e("select",{class:"form-select rounded-4",id:"turmas","onUpdate:modelValue":o[4]||(o[4]=a=>s.value.turma=a),disabled:t.value},[(r(!0),n(v,null,p(w.value,a=>(r(),n("option",{key:a.id,value:a.id},f(a.nome),9,ne))),128))],8,te),[[x,s.value.turma]])])]),e("div",re,[e("div",de,[ie,u(e("input",{class:"form-control rounded-4",type:"password",id:"senha","onUpdate:modelValue":o[5]||(o[5]=a=>s.value.senha=a),disabled:t.value},null,8,ue),[[h,s.value.senha]])]),e("div",ce,[ve,u(e("input",{class:"form-control rounded-4",type:"password",id:"confirmar_senha","onUpdate:modelValue":o[6]||(o[6]=a=>s.value.confirmarSenha=a),disabled:t.value},null,8,me),[[h,s.value.confirmarSenha]])])]),e("div",_e,[e("button",{class:"botao btn text-bg-dark rounded-4",onClick:y,disabled:t.value}," Criar conta ",8,he)]),e("div",{id:"error",class:z(["error",{"alert alert-danger":i.value.length>0}]),role:"alert"},[(r(!0),n(v,null,p(i.value,a=>(r(),n("div",{key:a},f(a),1))),128))],2)],32)])]),u(e("div",pe,be,512),[[D,_.value]])],64))}},we=B(xe,[["__scopeId","data-v-8f25f203"]]);export{we as default};
